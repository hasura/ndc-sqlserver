---
source: crates/query-engine/tests/tests.rs
expression: result
---
SELECT
  [rows].[json] AS [rows]
FROM
  (
    SELECT
      [artist].[Name] AS [title],
      [albums].[albums] AS [albums]
    FROM
      [public].[Artist] AS [artist]
      LEFT OUTER JOIN LATERAL (
        SELECT
          [rows].[rows] AS [rows]
        FROM
          (
            SELECT
              [album].[Title] AS [title]
            FROM
              [public].[Album] AS [album]
            WHERE
              (
                (
                  1 = 1
                  AND ([artist].[ArtistId] = [album].[ArtistId])
                ) FOR JSON PATH
              ) AS [rows]([json]) FOR JSON PATH,
              WITHOUT_ARRAY_WRAPPER
          ) AS [albums] ON ('true')
        WHERE
          EXISTS (
            SELECT
            FROM
              [public].[Album] AS [album]
            WHERE
              (
                ([album].[Title] LIKE $1)
                AND ([artist].[ArtistId] = [album].[ArtistId])
              ) FOR JSON PATH
          ) FOR JSON PATH
      ) AS [rows]([json]) FOR JSON PATH,
      WITHOUT_ARRAY_WRAPPER

[(1, String("Supernatural"))]
