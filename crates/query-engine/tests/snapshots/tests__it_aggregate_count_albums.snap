---
source: crates/query-engine/tests/tests.rs
expression: result
---
SELECT
  row_to_json([universe]) AS [universe]
FROM
  (
    SELECT
      *
    FROM
      (
        SELECT
          coalesce([rows], JSON_VALUE('[]', '$')) AS [json]
        FROM
          (
            SELECT
              [Album].[Title] AS [Title]
            FROM
              [public].[Album] AS [Album]
            ORDER BY
              [Album].[AlbumId] ASC OFFSET 3 ROWS FETCH NEXT 5 ROWS ONLY FOR JSON PATH,
              INCLUDE_NULL_VALUES
          ) AS [rows] FOR JSON PATH,
          INCLUDE_NULL_VALUES
      ) AS [rows]
      CROSS JOIN (
        SELECT
          COUNT(*) AS [how_many_albums]
        FROM
          [public].[Album] AS [Album] FOR JSON PATH,
          INCLUDE_NULL_VALUES,
          WITHOUT_ARRAY_WRAPPER
      ) AS [aggregates] FOR JSON PATH,
      INCLUDE_NULL_VALUES
  ) AS [universe] FOR JSON PATH,
  INCLUDE_NULL_VALUES

[]
